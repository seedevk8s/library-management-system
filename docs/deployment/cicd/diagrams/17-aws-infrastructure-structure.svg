<svg viewBox="0 0 1600 1100" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="800" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    Library Management System - AWS ì¸í”„ë¼ êµ¬ì¡°
  </text>
  <text x="800" y="70" font-size="16" text-anchor="middle" fill="#666">
    Region: ap-northeast-2 (Seoul) | VPC: vpc-07dd414387be45a0f
  </text>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="90" width="700" height="50" fill="#F8F9FA" stroke="#DEE2E6" stroke-width="2" rx="5"/>
    <rect x="70" y="105" width="30" height="20" fill="#D4EDDA" stroke="#28A745" stroke-width="2"/>
    <text x="110" y="120" font-size="13" fill="#155724" font-weight="bold">âœ… ìƒì„± ì™„ë£Œ</text>
    
    <rect x="230" y="105" width="30" height="20" fill="#FFF3CD" stroke="#FFC107" stroke-width="2"/>
    <text x="270" y="120" font-size="13" fill="#856404" font-weight="bold">ğŸ”„ ì§„í–‰ ì¤‘</text>
    
    <rect x="390" y="105" width="30" height="20" fill="#E9ECEF" stroke="#6C757D" stroke-width="2"/>
    <text x="430" y="120" font-size="13" fill="#495057" font-weight="bold">â³ ì˜ˆì •</text>
    
    <text x="570" y="120" font-size="13" fill="#666">â†’ ì˜ì¡´ ê´€ê³„</text>
  </g>
  
  <!-- VPC Container -->
  <rect x="50" y="170" width="1500" height="880" fill="#F0F8FF" stroke="#4A90E2" stroke-width="3" rx="15"/>
  <text x="800" y="205" font-size="22" font-weight="bold" text-anchor="middle" fill="#004085">
    VPC: vpc-07dd414387be45a0f (172.31.0.0/16)
  </text>
  
  <!-- ========================================= -->
  <!-- Layer 1: ì¸ì¦ ë° ê¶Œí•œ (ìµœìƒë‹¨) -->
  <!-- ========================================= -->
  <g id="layer1-auth">
    <rect x="80" y="230" width="700" height="140" fill="#D4EDDA" stroke="#28A745" stroke-width="3" rx="10"/>
    <text x="430" y="260" font-size="18" font-weight="bold" text-anchor="middle" fill="#155724">
      Layer 1: ì¸ì¦ ë° ê¶Œí•œ âœ…
    </text>
    
    <!-- IAM User -->
    <g id="iam-user">
      <rect x="100" y="280" width="300" height="70" fill="#FFFFFF" stroke="#28A745" stroke-width="2" rx="8"/>
      <text x="250" y="305" font-size="15" font-weight="bold" text-anchor="middle" fill="#155724">IAM User</text>
      <text x="250" y="325" font-size="13" text-anchor="middle" fill="#155724">github-actions-deploy2</text>
      <text x="110" y="345" font-size="11" fill="#155724">âœ“ AmazonEC2ContainerRegistryFullAccess</text>
      <text x="110" y="360" font-size="11" fill="#155724">âœ“ AmazonECS_FullAccess (+ 3ê°œ ì •ì±…)</text>
    </g>
    
    <!-- GitHub Secrets -->
    <g id="github-secrets">
      <rect x="440" y="280" width="300" height="70" fill="#FFFFFF" stroke="#28A745" stroke-width="2" rx="8"/>
      <text x="590" y="305" font-size="15" font-weight="bold" text-anchor="middle" fill="#155724">GitHub Secrets</text>
      <text x="450" y="325" font-size="11" fill="#155724">âœ“ AWS_ACCESS_KEY_ID</text>
      <text x="450" y="340" font-size="11" fill="#155724">âœ“ AWS_SECRET_ACCESS_KEY</text>
      <text x="450" y="355" font-size="11" fill="#155724">âœ“ AWS_REGION, ECR_REPOSITORY, ECS_CLUSTER</text>
    </g>
  </g>
  
  <!-- ========================================= -->
  <!-- Layer 2: ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ -->
  <!-- ========================================= -->
  <g id="layer2-network">
    <rect x="80" y="400" width="1440" height="290" fill="#E8F4FF" stroke="#4A90E2" stroke-width="3" rx="10"/>
    <text x="800" y="430" font-size="18" font-weight="bold" text-anchor="middle" fill="#004085">
      Layer 2: ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ
    </text>
    
    <!-- Security Groups (ì™¼ìª½) -->
    <g id="security-groups">
      <rect x="100" y="450" width="400" height="220" fill="#D4EDDA" stroke="#28A745" stroke-width="3" rx="8"/>
      <text x="300" y="480" font-size="16" font-weight="bold" text-anchor="middle" fill="#155724">Security Groups âœ…</text>
      
      <!-- ALB SG -->
      <rect x="120" y="495" width="360" height="55" fill="#FFFFFF" stroke="#28A745" stroke-width="2" rx="5"/>
      <text x="140" y="515" font-size="13" font-weight="bold" fill="#155724">library-alb-sg</text>
      <text x="140" y="533" font-size="11" fill="#155724">Inbound: HTTP(80), HTTPS(443) from 0.0.0.0/0</text>
      <text x="140" y="548" font-size="11" fill="#155724">ìš©ë„: ALB íŠ¸ë˜í”½ í—ˆìš©</text>
      
      <!-- ECS Task SG -->
      <rect x="120" y="560" width="360" height="50" fill="#FFFFFF" stroke="#28A745" stroke-width="2" rx="5"/>
      <text x="140" y="580" font-size="13" font-weight="bold" fill="#155724">library-ecs-task-sg</text>
      <text x="140" y="598" font-size="11" fill="#155724">Inbound: TCP(8081) from library-alb-sg</text>
      
      <!-- RDS SG -->
      <rect x="120" y="620" width="360" height="40" fill="#FFFFFF" stroke="#28A745" stroke-width="2" rx="5"/>
      <text x="140" y="640" font-size="13" font-weight="bold" fill="#155724">library-rds-sg</text>
      <text x="140" y="655" font-size="11" fill="#155724">Inbound: MySQL(3306) from library-ecs-task-sg</text>
    </g>
    
    <!-- ALB + Target Groups (ì¤‘ì•™) -->
    <g id="alb-section">
      <!-- ALB (ì˜ˆì •) -->
      <rect x="540" y="450" width="380" height="100" fill="#E9ECEF" stroke="#6C757D" stroke-width="3" rx="8" stroke-dasharray="5,5"/>
      <text x="730" y="480" font-size="16" font-weight="bold" text-anchor="middle" fill="#495057">ALB (ì˜ˆì •) â³</text>
      <text x="730" y="505" font-size="13" text-anchor="middle" fill="#495057">library-alb</text>
      <text x="560" y="525" font-size="11" fill="#495057">Listener: HTTP:80</text>
      <text x="560" y="542" font-size="11" fill="#495057">Scheme: Internet-facing</text>
      
      <!-- Target Groups -->
      <rect x="540" y="570" width="380" height="100" fill="#D4EDDA" stroke="#28A745" stroke-width="3" rx="8"/>
      <text x="730" y="595" font-size="16" font-weight="bold" text-anchor="middle" fill="#155724">Target Groups âœ…</text>
      
      <!-- Blue TG -->
      <rect x="560" y="605" width="160" height="55" fill="#D6EAF8" stroke="#3498DB" stroke-width="2" rx="5"/>
      <text x="640" y="625" font-size="13" font-weight="bold" text-anchor="middle" fill="#1F618D">library-blue-tg</text>
      <text x="570" y="642" font-size="10" fill="#1F618D">Port: 8081</text>
      <text x="570" y="655" font-size="10" fill="#1F618D">Health: /actuator/health</text>
      
      <!-- Green TG -->
      <rect x="740" y="605" width="160" height="55" fill="#D4EDDA" stroke="#28A745" stroke-width="2" rx="5"/>
      <text x="820" y="625" font-size="13" font-weight="bold" text-anchor="middle" fill="#155724">library-green-tg</text>
      <text x="750" y="642" font-size="10" fill="#155724">Port: 8081</text>
      <text x="750" y="655" font-size="10" fill="#155724">Health: /actuator/health</text>
    </g>
    
    <!-- Subnets (ì˜¤ë¥¸ìª½) -->
    <g id="subnets">
      <rect x="960" y="450" width="520" height="220" fill="#FFFFFF" stroke="#4A90E2" stroke-width="2" rx="8"/>
      <text x="1220" y="480" font-size="16" font-weight="bold" text-anchor="middle" fill="#004085">Availability Zones</text>
      
      <!-- AZ 1 -->
      <rect x="980" y="495" width="230" height="80" fill="#E8F4FF" stroke="#4A90E2" stroke-width="2" rx="5"/>
      <text x="1095" y="515" font-size="13" font-weight="bold" text-anchor="middle" fill="#004085">ap-northeast-2a</text>
      <text x="990" y="535" font-size="11" fill="#004085">Public Subnet</text>
      <text x="990" y="552" font-size="10" fill="#666">â€¢ ALB ë°°ì¹˜ ê°€ëŠ¥</text>
      <text x="990" y="567" font-size="10" fill="#666">â€¢ ECS Task ì‹¤í–‰</text>
      
      <!-- AZ 2 -->
      <rect x="1230" y="495" width="230" height="80" fill="#E8F4FF" stroke="#4A90E2" stroke-width="2" rx="5"/>
      <text x="1345" y="515" font-size="13" font-weight="bold" text-anchor="middle" fill="#004085">ap-northeast-2c</text>
      <text x="1240" y="535" font-size="11" fill="#004085">Public Subnet</text>
      <text x="1240" y="552" font-size="10" fill="#666">â€¢ ê³ ê°€ìš©ì„± ë³´ì¥</text>
      <text x="1240" y="567" font-size="10" fill="#666">â€¢ ì¥ì•  ëŒ€ë¹„</text>
      
      <!-- Private Subnets (ì˜ˆì •) -->
      <rect x="980" y="590" width="480" height="70" fill="#F8F9FA" stroke="#6C757D" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
      <text x="1220" y="615" font-size="13" font-weight="bold" text-anchor="middle" fill="#495057">Private Subnets (ì˜ˆì •)</text>
      <text x="990" y="635" font-size="11" fill="#495057">â€¢ RDS ë°°ì¹˜ìš©</text>
      <text x="990" y="650" font-size="11" fill="#495057">â€¢ ë³´ì•ˆ ê°•í™”</text>
    </g>
  </g>
  
  <!-- Arrow: Security Groups â†’ ALB -->
  <path d="M 500 560 L 540 500" stroke="#28A745" stroke-width="3" fill="none" marker-end="url(#arrowgreen3)"/>
  
  <!-- Arrow: ALB â†’ Target Groups -->
  <path d="M 730 550 L 730 570" stroke="#6C757D" stroke-width="3" fill="none" marker-end="url(#arrowgray3)" stroke-dasharray="5,5"/>
  
  <!-- ========================================= -->
  <!-- Layer 3: ì»´í“¨íŒ… ë° ìŠ¤í† ë¦¬ì§€ ê³„ì¸µ -->
  <!-- ========================================= -->
  <g id="layer3-compute">
    <rect x="80" y="720" width="1440" height="180" fill="#FFF9E6" stroke="#FFB74D" stroke-width="3" rx="10"/>
    <text x="800" y="750" font-size="18" font-weight="bold" text-anchor="middle" fill="#E65100">
      Layer 3: ì»´í“¨íŒ… ë° ìŠ¤í† ë¦¬ì§€ ê³„ì¸µ
    </text>
    
    <!-- ECR -->
    <g id="ecr">
      <rect x="100" y="770" width="320" height="110" fill="#D4EDDA" stroke="#28A745" stroke-width="3" rx="8"/>
      <text x="260" y="800" font-size="15" font-weight="bold" text-anchor="middle" fill="#155724">ECR Repository âœ…</text>
      <text x="260" y="820" font-size="13" text-anchor="middle" fill="#155724">library-management-system</text>
      <text x="110" y="840" font-size="11" fill="#155724">â€¢ Docker ì´ë¯¸ì§€ ì €ì¥ì†Œ</text>
      <text x="110" y="857" font-size="11" fill="#155724">â€¢ Private Repository</text>
      <text x="110" y="874" font-size="11" fill="#155724">â€¢ ì´ë¯¸ì§€: library-app:latest</text>
    </g>
    
    <!-- ECS Cluster -->
    <g id="ecs-cluster">
      <rect x="460" y="770" width="320" height="110" fill="#D4EDDA" stroke="#28A745" stroke-width="3" rx="8"/>
      <text x="620" y="800" font-size="15" font-weight="bold" text-anchor="middle" fill="#155724">ECS Cluster âœ…</text>
      <text x="620" y="820" font-size="13" text-anchor="middle" fill="#155724">library-management-cluster</text>
      <text x="470" y="840" font-size="11" fill="#155724">â€¢ ì»´í“¨íŒ… í”Œë«í¼</text>
      <text x="470" y="857" font-size="11" fill="#155724">â€¢ Launch Type: Fargate (ì„œë²„ë¦¬ìŠ¤)</text>
      <text x="470" y="874" font-size="11" fill="#155724">â€¢ Region: ap-northeast-2</text>
    </g>
    
    <!-- CloudWatch Logs -->
    <g id="cloudwatch">
      <rect x="820" y="770" width="320" height="110" fill="#E9ECEF" stroke="#6C757D" stroke-width="3" rx="8" stroke-dasharray="5,5"/>
      <text x="980" y="800" font-size="15" font-weight="bold" text-anchor="middle" fill="#495057">CloudWatch Logs â³</text>
      <text x="980" y="820" font-size="13" text-anchor="middle" fill="#495057">/ecs/library-management-task</text>
      <text x="830" y="840" font-size="11" fill="#495057">â€¢ ë¡œê·¸ ìˆ˜ì§‘ ë° ëª¨ë‹ˆí„°ë§</text>
      <text x="830" y="857" font-size="11" fill="#495057">â€¢ Retention: 7ì¼</text>
      <text x="830" y="874" font-size="11" fill="#495057">â€¢ ìƒíƒœ: ìƒì„± ì˜ˆì •</text>
    </g>
    
    <!-- Parameter Store -->
    <g id="parameter-store">
      <rect x="1180" y="770" width="320" height="110" fill="#E9ECEF" stroke="#6C757D" stroke-width="3" rx="8" stroke-dasharray="5,5"/>
      <text x="1340" y="800" font-size="15" font-weight="bold" text-anchor="middle" fill="#495057">Parameter Store â³</text>
      <text x="1190" y="825" font-size="11" fill="#495057">â€¢ /library/db/url</text>
      <text x="1190" y="842" font-size="11" fill="#495057">â€¢ /library/db/username</text>
      <text x="1190" y="859" font-size="11" fill="#495057">â€¢ /library/db/password</text>
      <text x="1190" y="876" font-size="11" fill="#495057">ìƒíƒœ: ìƒì„± ì˜ˆì •</text>
    </g>
  </g>
  
  <!-- Arrow: ECR â†’ ECS -->
  <path d="M 420 825 L 460 825" stroke="#28A745" stroke-width="3" fill="none" marker-end="url(#arrowgreen3)"/>
  
  <!-- Arrow: Target Groups â†’ ECS -->
  <path d="M 730 670 L 620 770" stroke="#28A745" stroke-width="3" fill="none" marker-end="url(#arrowgreen3)" stroke-dasharray="5,5"/>
  
  <!-- ========================================= -->
  <!-- Layer 4: ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ (ì˜ˆì •) -->
  <!-- ========================================= -->
  <g id="layer4-app">
    <rect x="80" y="930" width="1440" height="100" fill="#F8F9FA" stroke="#6C757D" stroke-width="3" rx="10" stroke-dasharray="5,5"/>
    <text x="800" y="960" font-size="18" font-weight="bold" text-anchor="middle" fill="#495057">
      Layer 4: ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ (ì˜ˆì •) â³
    </text>
    
    <!-- Task Definition -->
    <rect x="100" y="980" width="320" height="35" fill="#E9ECEF" stroke="#6C757D" stroke-width="2" rx="5"/>
    <text x="260" y="1003" font-size="13" text-anchor="middle" fill="#495057">Task Definition</text>
    
    <!-- ECS Service -->
    <rect x="460" y="980" width="320" height="35" fill="#E9ECEF" stroke="#6C757D" stroke-width="2" rx="5"/>
    <text x="620" y="1003" font-size="13" text-anchor="middle" fill="#495057">ECS Service (library-service)</text>
    
    <!-- CodeDeploy -->
    <rect x="820" y="980" width="320" height="35" fill="#E9ECEF" stroke="#6C757D" stroke-width="2" rx="5"/>
    <text x="980" y="1003" font-size="13" text-anchor="middle" fill="#495057">CodeDeploy (Blue-Green)</text>
    
    <!-- RDS -->
    <rect x="1180" y="980" width="320" height="35" fill="#E9ECEF" stroke="#6C757D" stroke-width="2" rx="5"/>
    <text x="1340" y="1003" font-size="13" text-anchor="middle" fill="#495057">RDS MySQL 8.0</text>
  </g>
  
  <!-- Arrow: ECS â†’ Layer 4 -->
  <path d="M 620 880 L 620 930" stroke="#6C757D" stroke-width="3" fill="none" marker-end="url(#arrowgray3)" stroke-dasharray="5,5"/>
  
  <!-- Summary Box -->
  <g id="summary">
    <rect x="820" y="90" width="730" height="50" fill="#D4EDDA" stroke="#28A745" stroke-width="2" rx="5"/>
    <text x="1185" y="115" font-size="14" text-anchor="middle" fill="#155724">
      <tspan font-weight="bold">ìƒì„± ì™„ë£Œ: 8ê°œ</tspan>
      <tspan x="1185" dy="18">IAM, VPC, SG(3), ECR, ECS Cluster, TG(2)</tspan>
    </text>
  </g>
  
  <!-- Current Status -->
  <g id="current-status">
    <rect x="50" y="1050" width="1500" height="35" fill="#FF6B6B" stroke="#DC3545" stroke-width="2" rx="5"/>
    <text x="800" y="1075" font-size="16" font-weight="bold" text-anchor="middle" fill="white">
      ğŸ“ í˜„ì¬ ìœ„ì¹˜: Layer 2 ì™„ë£Œ (60%) â†’ ë‹¤ìŒ: ALB ìƒì„± + Layer 3 Parameter Store + CloudWatch Logs
    </text>
  </g>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowgreen3" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L0,12 L12,6 z" fill="#28A745"/>
    </marker>
    <marker id="arrowgray3" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L0,12 L12,6 z" fill="#6C757D"/>
    </marker>
  </defs>
</svg>
